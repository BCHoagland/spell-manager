Instead of removing spells you don't know, just make them translucent (or something like that). That way you can still plan ahead

Go through every spell (oof) and fix them

Add level back to the fields dict per spell

Make the spell descriptions go in a scrollable area so there's no overflow

make levels that have no spells in them not have their own tables

remove solid part of header so that it doesn't prevent the topmost spells from being clicked
